{
  "version": 3,
  "sources": ["../../src/string/generate-hash.ts"],
  "sourcesContent": ["/**\n * MurmurHash3 implementation\n *\n * Generate a hash from a string using the MurmurHash3 algorithm\n * Provides 64-bit hash output with excellent speed and distribution\n *\n * We had to move away from xxhash-wasm since it was causing issues with content security policy (CSP) violations.\n *\n * We cannot use crypto.subtle because it is only available in secure contexts (HTTPS) or on localhost.\n *\n * @param input - The string to hash\n * @returns The 64-bit hash of the input string as a 16-character hex string\n */\nexport const generateHash = (input: string): string => {\n  const seed = 0\n\n  // Working with 64-bit values using pairs of 32-bit integers\n  let h1 = seed\n  let h2 = seed\n\n  const len = input.length\n  const remainder = len & 15 // len % 16\n  const bytes = len - remainder\n\n  const c1 = 0x87c37b91\n  const c2 = 0x4cf5ad43\n  const c3 = 0x52dce729\n  const c4 = 0x38495ab5\n\n  // Process 16-byte chunks\n  for (let i = 0; i < bytes; i += 16) {\n    let k1 =\n      (input.charCodeAt(i) & 0xff) |\n      ((input.charCodeAt(i + 1) & 0xff) << 8) |\n      ((input.charCodeAt(i + 2) & 0xff) << 16) |\n      ((input.charCodeAt(i + 3) & 0xff) << 24)\n\n    let k2 =\n      (input.charCodeAt(i + 4) & 0xff) |\n      ((input.charCodeAt(i + 5) & 0xff) << 8) |\n      ((input.charCodeAt(i + 6) & 0xff) << 16) |\n      ((input.charCodeAt(i + 7) & 0xff) << 24)\n\n    let k3 =\n      (input.charCodeAt(i + 8) & 0xff) |\n      ((input.charCodeAt(i + 9) & 0xff) << 8) |\n      ((input.charCodeAt(i + 10) & 0xff) << 16) |\n      ((input.charCodeAt(i + 11) & 0xff) << 24)\n\n    let k4 =\n      (input.charCodeAt(i + 12) & 0xff) |\n      ((input.charCodeAt(i + 13) & 0xff) << 8) |\n      ((input.charCodeAt(i + 14) & 0xff) << 16) |\n      ((input.charCodeAt(i + 15) & 0xff) << 24)\n\n    k1 = Math.imul(k1, c1)\n    k1 = (k1 << 15) | (k1 >>> 17)\n    k1 = Math.imul(k1, c2)\n    h1 ^= k1\n\n    h1 = (h1 << 13) | (h1 >>> 19)\n    h1 = Math.imul(h1, 5) + 0xe6546b64\n\n    k2 = Math.imul(k2, c2)\n    k2 = (k2 << 16) | (k2 >>> 16)\n    k2 = Math.imul(k2, c3)\n    h2 ^= k2\n\n    h2 = (h2 << 17) | (h2 >>> 15)\n    h2 = Math.imul(h2, 5) + 0x1b873593\n\n    k3 = Math.imul(k3, c3)\n    k3 = (k3 << 17) | (k3 >>> 15)\n    k3 = Math.imul(k3, c4)\n    h1 ^= k3\n\n    h1 = (h1 << 15) | (h1 >>> 17)\n    h1 = Math.imul(h1, 5) + 0x52dce729\n\n    k4 = Math.imul(k4, c4)\n    k4 = (k4 << 18) | (k4 >>> 14)\n    k4 = Math.imul(k4, c1)\n    h2 ^= k4\n\n    h2 = (h2 << 13) | (h2 >>> 19)\n    h2 = Math.imul(h2, 5) + 0x38495ab5\n  }\n\n  // Process remaining bytes\n  if (remainder > 0) {\n    let k1 = 0\n    let k2 = 0\n    let k3 = 0\n    let k4 = 0\n\n    if (remainder >= 15) {\n      k4 ^= (input.charCodeAt(bytes + 14) & 0xff) << 16\n    }\n    if (remainder >= 14) {\n      k4 ^= (input.charCodeAt(bytes + 13) & 0xff) << 8\n    }\n    if (remainder >= 13) {\n      k4 ^= input.charCodeAt(bytes + 12) & 0xff\n      k4 = Math.imul(k4, c4)\n      k4 = (k4 << 18) | (k4 >>> 14)\n      k4 = Math.imul(k4, c1)\n      h2 ^= k4\n    }\n\n    if (remainder >= 12) {\n      k3 ^= (input.charCodeAt(bytes + 11) & 0xff) << 24\n    }\n    if (remainder >= 11) {\n      k3 ^= (input.charCodeAt(bytes + 10) & 0xff) << 16\n    }\n    if (remainder >= 10) {\n      k3 ^= (input.charCodeAt(bytes + 9) & 0xff) << 8\n    }\n    if (remainder >= 9) {\n      k3 ^= input.charCodeAt(bytes + 8) & 0xff\n      k3 = Math.imul(k3, c3)\n      k3 = (k3 << 17) | (k3 >>> 15)\n      k3 = Math.imul(k3, c4)\n      h1 ^= k3\n    }\n\n    if (remainder >= 8) {\n      k2 ^= (input.charCodeAt(bytes + 7) & 0xff) << 24\n    }\n    if (remainder >= 7) {\n      k2 ^= (input.charCodeAt(bytes + 6) & 0xff) << 16\n    }\n    if (remainder >= 6) {\n      k2 ^= (input.charCodeAt(bytes + 5) & 0xff) << 8\n    }\n    if (remainder >= 5) {\n      k2 ^= input.charCodeAt(bytes + 4) & 0xff\n      k2 = Math.imul(k2, c2)\n      k2 = (k2 << 16) | (k2 >>> 16)\n      k2 = Math.imul(k2, c3)\n      h2 ^= k2\n    }\n\n    if (remainder >= 4) {\n      k1 ^= (input.charCodeAt(bytes + 3) & 0xff) << 24\n    }\n    if (remainder >= 3) {\n      k1 ^= (input.charCodeAt(bytes + 2) & 0xff) << 16\n    }\n    if (remainder >= 2) {\n      k1 ^= (input.charCodeAt(bytes + 1) & 0xff) << 8\n    }\n    if (remainder >= 1) {\n      k1 ^= input.charCodeAt(bytes) & 0xff\n      k1 = Math.imul(k1, c1)\n      k1 = (k1 << 15) | (k1 >>> 17)\n      k1 = Math.imul(k1, c2)\n      h1 ^= k1\n    }\n  }\n\n  // Finalization\n  h1 ^= len\n  h2 ^= len\n\n  h1 += h2\n  h2 += h1\n\n  h1 ^= h1 >>> 16\n  h1 = Math.imul(h1, 0x85ebca6b)\n  h1 ^= h1 >>> 13\n  h1 = Math.imul(h1, 0xc2b2ae35)\n  h1 ^= h1 >>> 16\n\n  h2 ^= h2 >>> 16\n  h2 = Math.imul(h2, 0x85ebca6b)\n  h2 ^= h2 >>> 13\n  h2 = Math.imul(h2, 0xc2b2ae35)\n  h2 ^= h2 >>> 16\n\n  h1 += h2\n  h2 += h1\n\n  // Return 64-bit hash as hex string (two 32-bit values concatenated)\n  return (h1 >>> 0).toString(16).padStart(8, '0') + (h2 >>> 0).toString(16).padStart(8, '0')\n}\n"],
  "mappings": "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",
  "names": []
}
